  yum -y install dhcp

vim /etc/dhcp/dhcpd.conf 
:r  /usr/share/doc/dhcp*/dhcpd.conf.example
subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.100 192.168.4.200;
  option domain-name-servers 192.168.4.7;
  option routers 192.168.4.254;
  default-lease-time 600;
  max-lease-time 7200;
next-server  192.168.4.7; #指定下一个服务器地址
  filename "pxelinux.0"; 

  	yum -y install tftp-server
	yum provides */pxelinux.0   #查询那个软件产生该文件
	yum -y install syslinux
	rpm -ql syslinux | grep pxelinux.0  #查询安装清单
 cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/
mkdir /var/lib/tftpboot/pxelinux.cfg
mount /dev/cdrom  /mnt/
 cp /mnt/isolinux/isolinux.cfg           /var/lib/tftpboot/pxelinux.cfg/default

 cp /mnt/isolinux/vesamenu.c32 /mnt/isolinux/splash.png /var/lib/tftpboot/

 cp /mnt/isolinux/vmlinuz /mnt/isolinux/initrd.img /var/lib/tftpboot/

vim  /var/lib/tftpboot/pxelinux.cfg/default

default vesamenu.c32    #默认加载图形模块
2 timeout 600             #默认读秒时间 1/10

10 menu background splash.png       #背景图片
11 menu title NSD1905 PXE Server !  #标题显示

61 label linux
62   menu label Install CentOS 7.5   #菜单显示的内容
     menu  default                #读秒结束后默认选择
63   kernel vmlinuz                  #加载启动内核
64   append initrd=initrd.img 

	systemctl disable tftp
 yum -y install httpd
mkdir /var/www/html/centos
[root@svr7 ~]# mount /dev/cdrom  /var/www/html/centos
yum -y install system-config-kickstart 
       	[development]
	LANG=en  system-config-kickstart
 cp /root/ks.cfg /var/www/html/

append initrd=initrd.img ks=http://192.168.4.7/ks.cfg




	部署pxelinux.0文件

yum -y install syslinux 
cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/
	部署菜单文件

mkdir /var/lib/tftpboot/pxelinux.cfg
cp /mnt/isolinux/isolinux.cfg  /var/lib/tftpboot/pxelinux.cfg/default

	部署图形模块(vesamenu.c32)与背景图片(splash.png)
	部署启动内核(vmlinuz)与驱动程序(initrd.img)
	修改菜单文件
	构建Web服务提供众多的软件包 部署无人值守安装,生成应答文件

